<!DOCTYPE html>
<html lang="pt-MZ">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AmazonMoney - Investimento</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #f72585;
            --secondary-dark: #e01a76;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --success-dark: #2fb6e0;
            --warning: #f8961e;
            --info: #4895ef;
            --purple: #7209b7;
            --purple-dark: #5e0896;
            --gray: #6c757d;
            --gray-light: #e9ecef;
            --border-radius: 12px;
            --box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
            --whatsapp: #25D366;
            --facebook: #1877F2;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            transition: var(--transition);
        }
        
        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--light);
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            padding: 25px 0;
            text-align: center;
            border-radius: 0 0 25px 25px;
            box-shadow: var(--box-shadow);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
            background-size: cover;
        }
        
        .logo {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 8px;
            position: relative;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .tagline {
            font-size: 16px;
            opacity: 0.9;
            max-width: 500px;
            margin: 0 auto;
            position: relative;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin: 20px 0;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .dark-mode .card {
            background: #2d3748;
            color: var(--light);
            border-color: #4a5568;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.15);
        }
        
        .card-title {
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--primary);
            border-bottom: 1px solid var(--gray-light);
            padding-bottom: 12px;
            display: flex;
            align-items: center;
        }
        
        .dark-mode .card-title {
            border-color: #4a5568;
        }
        
        .card-title i {
            margin-right: 10px;
            font-size: 24px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .dark-mode label {
            color: var(--light);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--gray-light);
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
            background: white;
        }
        
        .dark-mode input, .dark-mode select, .dark-mode textarea {
            background: #4a5568;
            border-color: #718096;
            color: var(--light);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        button.secondary {
            background: var(--secondary);
        }
        
        button.secondary:hover {
            background: var(--secondary-dark);
        }
        
        button.success {
            background: var(--success);
        }
        
        button.success:hover {
            background: var(--success-dark);
        }
        
        button.purple {
            background: var(--purple);
        }
        
        button.purple:hover {
            background: var(--purple-dark);
        }
        
        button.warning {
            background: var(--warning);
        }
        
        button.warning:hover {
            background: #e6890f;
        }
        
        button:disabled {
            background: #adb5bd;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-full {
            width: 100%;
        }
        
        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }
        
        .dashboard {
            display: none;
        }
        
        /* Estilos para a carteira de saldo - MODIFICADO PARA NÃO MOSTRAR CENTAVOS */
        .wallet-container {
            margin: 20px 0;
        }
        
        .wallet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .wallet-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            border-left: 4px solid var(--primary);
        }
        
        .dark-mode .wallet-card {
            background: #2d3748;
        }
        
        .wallet-card.principal {
            border-left-color: var(--primary);
        }
        
        .wallet-card.bonus {
            border-left-color: var(--warning);
        }
        
        .wallet-card.mining {
            border-left-color: var(--success);
        }
        
        .wallet-card:hover {
            transform: translateY(-5px);
        }
        
        .wallet-icon {
            font-size: 32px;
            margin-bottom: 15px;
        }
        
        .wallet-card.principal .wallet-icon {
            color: var(--primary);
        }
        
        .wallet-card.bonus .wallet-icon {
            color: var(--warning);
        }
        
        .wallet-card.mining .wallet-icon {
            color: var(--success);
        }
        
        .wallet-label {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 8px;
        }
        
        .dark-mode .wallet-label {
            color: #cbd5e0;
        }
        
        .wallet-amount {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .wallet-card.principal .wallet-amount {
            color: var(--primary);
        }
        
        .wallet-card.bonus .wallet-amount {
            color: var(--warning);
        }
        
        .wallet-card.mining .wallet-amount {
            color: var(--success);
        }
        
        .wallet-description {
            font-size: 12px;
            color: var(--gray);
        }
        
        .dark-mode .wallet-description {
            color: #a0aec0;
        }
        
        .total-balance {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 20px 0;
            box-shadow: var(--box-shadow);
        }
        
        .total-balance-label {
            font-size: 16px;
            margin-bottom: 10px;
            opacity: 0.9;
        }
        
        .total-balance-amount {
            font-size: 42px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .balance-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .balance-actions button {
            flex: 1;
        }
        
        .timer-container {
            text-align: center;
            margin: 30px 0;
            position: relative;
        }
        
        .timer-progress {
            width: 200px;
            height: 200px;
            margin: 0 auto 20px;
            position: relative;
        }
        
        .timer-progress-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(var(--secondary) 0%, var(--gray-light) 0%);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 1s linear;
        }
        
        .timer {
            font-size: 42px;
            font-weight: bold;
            color: var(--dark);
        }
        
        .dark-mode .timer {
            color: var(--light);
        }
        
        .referral-code {
            background: linear-gradient(135deg, var(--primary), var(--purple));
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .referral-code span {
            font-weight: bold;
            font-size: 20px;
            display: block;
            margin: 10px 0;
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 8px;
            letter-spacing: 1px;
        }
        
        .history {
            max-height: 300px;
            overflow-y: auto;
            border-radius: 8px;
            border: 1px solid var(--gray-light);
        }
        
        .dark-mode .history {
            border-color: #4a5568;
        }
        
        .history-item {
            padding: 15px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }
        
        .dark-mode .history-item {
            border-color: #4a5568;
        }
        
        .history-item:hover {
            background: var(--gray-light);
        }
        
        .dark-mode .history-item:hover {
            background: #4a5568;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-item-details {
            display: flex;
            flex-direction: column;
        }
        
        .history-item-date {
            font-size: 12px;
            color: var(--gray);
            margin-top: 4px;
        }
        
        .positive {
            color: var(--success);
            font-weight: bold;
        }
        
        .negative {
            color: var(--secondary);
            font-weight: bold;
        }
        
        .info {
            color: var(--info);
        }
        
        .purple-text {
            color: var(--purple);
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--gray-light);
            overflow-x: auto;
            background: white;
            border-radius: var(--border-radius);
            padding: 5px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .dark-mode .tab-container {
            background: #2d3748;
            border-color: #4a5568;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 8px;
            white-space: nowrap;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }
        
        .dark-mode .tab {
            color: var(--light);
        }
        
        .tab.active {
            background: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .alert-success {
            background: rgba(76, 201, 240, 0.15);
            color: #0c5460;
            border: 1px solid rgba(76, 201, 240, 0.3);
        }
        
        .dark-mode .alert-success {
            background: rgba(76, 201, 240, 0.2);
            color: #c6f6f6;
        }
        
        .alert-error {
            background: rgba(248, 37, 133, 0.15);
            color: #721c24;
            border: 1px solid rgba(248, 37, 133, 0.3);
        }
        
        .dark-mode .alert-error {
            background: rgba(248, 37, 133, 0.2);
            color: #f8d7da;
        }
        
        .alert-info {
            background: rgba(72, 149, 239, 0.15);
            color: #0c5460;
            border: 1px solid rgba(72, 149, 239, 0.3);
        }
        
        .dark-mode .alert-info {
            background: rgba(72, 149, 239, 0.2);
            color: #d1ecf1;
        }
        
        .alert-warning {
            background: rgba(248, 150, 30, 0.15);
            color: #856404;
            border: 1px solid rgba(248, 150, 30, 0.3);
        }
        
        .dark-mode .alert-warning {
            background: rgba(248, 150, 30, 0.2);
            color: #fff3cd;
        }
        
        .paga-facil-info {
            background: linear-gradient(135deg, #e9f7fe, #f0f4ff);
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            border-left: 4px solid var(--primary);
        }
        
        .dark-mode .paga-facil-info {
            background: linear-gradient(135deg, #2d3748, #4a5568);
        }
        
        .paga-facil-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px 0;
        }
        
        .paga-facil-logo span {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .withdraw-info, .deposit-info {
            font-size: 14px;
            color: var(--gray);
            margin-top: 20px;
            background: var(--gray-light);
            padding: 15px;
            border-radius: 8px;
        }
        
        .dark-mode .withdraw-info, .dark-mode .deposit-info {
            background: #4a5568;
            color: #cbd5e0;
        }
        
        .bonus-badge {
            background: var(--warning);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }
        
        .primary-login-badge {
            background: var(--purple);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin-left: 10px;
        }
        
        .merchant-code {
            background: linear-gradient(135deg, var(--info), var(--primary));
            color: white;
            padding: 15px;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 20px 0;
            font-family: monospace;
            font-size: 20px;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .steps {
            margin: 25px 0;
        }
        
        .step {
            display: flex;
            margin-bottom: 20px;
            align-items: flex-start;
        }
        
        .step-number {
            background: var(--primary);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .step-content {
            flex: 1;
        }
        
        .login-bonus {
            background: linear-gradient(135deg, var(--purple), var(--primary));
            color: white;
            padding: 25px;
            border-radius: var(--border-radius);
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        
        .login-bonus h3 {
            margin-bottom: 10px;
            font-size: 26px;
        }
        
        .login-bonus p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 25px 0;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
            border-left: 4px solid var(--primary);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }
        
        .dark-mode .stat-card {
            background: #2d3748;
            border-color: var(--primary);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .stat-label {
            font-size: 14px;
            color: var(--gray);
            margin-top: 8px;
        }
        
        .dark-mode .stat-label {
            color: #cbd5e0;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            color: var(--gray);
            font-size: 14px;
            border-top: 1px solid var(--gray-light);
        }
        
        .dark-mode footer {
            border-color: #4a5568;
            color: #cbd5e0;
        }
        
        .consecutive-days {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            gap: 10px;
        }
        
        .day-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--gray-light);
        }
        
        .day-indicator.active {
            background: var(--success);
        }
        
        .day-indicator.today {
            border: 2px solid var(--success);
            background: white;
        }
        
        .dark-mode .day-indicator.today {
            background: #2d3748;
        }
        
        .copy-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 10px;
            transition: var(--transition);
        }
        
        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(150%);
            transition: transform 0.5s ease;
        }
        
        .dark-mode .notification {
            background: #2d3748;
            color: var(--light);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            border-left: 4px solid var(--success);
        }
        
        .notification.error {
            border-left: 4px solid var(--secondary);
        }
        
        .notification.info {
            border-left: 4px solid var(--info);
        }
        
        /* Estilos para a Máquina de Mineração */
        .mining-machines {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .mining-machine {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .dark-mode .mining-machine {
            background: linear-gradient(135deg, #2d3748, #4a5568);
        }
        
        .mining-machine:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }
        
        .mining-machine.featured {
            border-color: var(--warning);
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
        }
        
        .dark-mode .mining-machine.featured {
            background: linear-gradient(135deg, #4a5568, #718096);
        }
        
        .machine-icon {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .machine-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .dark-mode .machine-name {
            color: var(--light);
        }
        
        .machine-price {
            font-size: 22px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .machine-return {
            font-size: 16px;
            color: var(--success);
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .machine-profit {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 10px;
            background: rgba(76, 201, 240, 0.1);
            padding: 5px 10px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .dark-mode .machine-profit {
            background: rgba(76, 201, 240, 0.2);
        }
        
        .machine-timer {
            font-size: 14px;
            color: var(--warning);
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .machine-roi {
            font-size: 12px;
            color: var(--info);
            margin-bottom: 15px;
            background: rgba(72, 149, 239, 0.1);
            padding: 3px 8px;
            border-radius: 15px;
            display: inline-block;
        }
        
        .dark-mode .machine-roi {
            background: rgba(72, 149, 239, 0.2);
        }
        
        .active-mining {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            border-color: var(--success);
        }
        
        .dark-mode .active-mining {
            background: linear-gradient(135deg, #2d5a2d, #3a7a3a);
        }
        
        .mining-progress {
            height: 6px;
            background: var(--gray-light);
            border-radius: 3px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .dark-mode .mining-progress {
            background: #4a5568;
        }
        
        .mining-progress-bar {
            height: 100%;
            background: linear-gradient(135deg, var(--success), var(--info));
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .mining-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .mining-stat {
            background: white;
            padding: 15px;
            border-radius: var(--border-radius);
            text-align: center;
            border-left: 4px solid var(--info);
        }
        
        .dark-mode .mining-stat {
            background: #2d3748;
        }
        
        .mining-stat-value {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
        }
        
        .mining-stat-label {
            font-size: 12px;
            color: var(--gray);
            margin-top: 5px;
        }
        
        .dark-mode .mining-stat-label {
            color: #cbd5e0;
        }
        
        .investment-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .investment-buttons button {
            flex: 1;
        }
        
        .quick-invest-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .quick-invest-btn {
            background: var(--info);
            padding: 10px;
            font-size: 14px;
        }
        
        .quick-invest-btn:hover {
            background: #3a7bd5;
        }
        
        /* Tema escuro/claro */
        .theme-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 100;
            transition: var(--transition);
        }
        
        .theme-toggle:hover {
            transform: scale(1.1);
        }
        
        /* Estilos para M-Pesa E-mola */
        .mpesa-emola-info {
            background: linear-gradient(135deg, #00a650, #007e3a);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            border-left: 4px solid #ffcc00;
        }
        
        .mpesa-emola-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px 0;
        }
        
        .mpesa-emola-logo span {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .linked-account {
            background: linear-gradient(135deg, #e9f7fe, #f0f4ff);
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            border-left: 4px solid var(--success);
            display: none;
        }
        
        .dark-mode .linked-account {
            background: linear-gradient(135deg, #2d3748, #4a5568);
        }
        
        .account-details {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .account-icon {
            font-size: 40px;
            color: var(--success);
        }
        
        .account-info {
            flex: 1;
        }
        
        .account-name {
            font-weight: bold;
            font-size: 18px;
        }
        
        .account-number {
            color: var(--gray);
            font-size: 14px;
        }
        
        .unlink-btn {
            background: var(--secondary);
            padding: 8px 15px;
            font-size: 14px;
        }
        
        .confirmation-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }
        
        .confirmation-modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .confirmation-content {
            background: white;
            padding: 30px;
            border-radius: var(--border-radius);
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .dark-mode .confirmation-content {
            background: #2d3748;
            color: var(--light);
        }
        
        .confirmation-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .confirmation-buttons button {
            flex: 1;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Botões de WhatsApp e Facebook */
        .social-buttons {
            position: fixed;
            bottom: 80px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }
        
        .social-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }
        
        .social-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
        }
        
        .whatsapp-btn {
            background: var(--whatsapp);
        }
        
        .facebook-btn {
            background: var(--facebook);
        }
        
        .social-tooltip {
            position: absolute;
            right: 70px;
            background: var(--dark);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            white-space: nowrap;
            opacity: 0;
            transform: translateX(10px);
            transition: var(--transition);
            pointer-events: none;
        }
        
        .social-btn:hover .social-tooltip {
            opacity: 1;
            transform: translateX(0);
        }
        
        .social-tooltip::after {
            content: '';
            position: absolute;
            top: 50%;
            right: -6px;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 6px solid var(--dark);
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
        }
        
        /* Seção de compartilhamento social */
        .social-share {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            justify-content: center;
        }
        
        .social-share-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
            transition: var(--transition);
            cursor: pointer;
        }
        
        .social-share-btn:hover {
            transform: translateY(-3px);
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }
            
            .timer {
                font-size: 36px;
            }
            
            .total-balance-amount {
                font-size: 36px;
            }
            
            .tab {
                padding: 10px 15px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .wallet-grid {
                grid-template-columns: 1fr;
            }
            
            .timer-progress {
                width: 150px;
                height: 150px;
            }
            
            .timer {
                font-size: 32px;
            }
            
            .notification {
                right: 10px;
                left: 10px;
            }
            
            .mining-machines {
                grid-template-columns: 1fr;
            }
            
            .mining-stats {
                grid-template-columns: 1fr;
            }
            
            .investment-buttons {
                flex-direction: column;
            }
            
            .quick-invest-buttons {
                grid-template-columns: 1fr;
            }
            
            .balance-actions {
                flex-direction: column;
            }
            
            .confirmation-buttons {
                flex-direction: column;
            }
            
            .account-details {
                flex-direction: column;
                text-align: center;
            }
            
            .social-buttons {
                bottom: 70px;
                right: 15px;
            }
            
            .social-btn {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .social-tooltip {
                right: 60px;
                font-size: 12px;
                padding: 6px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">Operação realizada com sucesso!</span>
    </div>
    
    <!-- Modal de confirmação -->
    <div class="confirmation-modal" id="confirmation-modal">
        <div class="confirmation-content">
            <h3 id="confirmation-title">Confirmar Operação</h3>
            <p id="confirmation-message">Tem certeza que deseja prosseguir com esta operação?</p>
            <div class="confirmation-buttons">
                <button id="confirmation-cancel" class="secondary">Cancelar</button>
                <button id="confirmation-confirm" class="success">Confirmar</button>
            </div>
        </div>
    </div>
    
    <!-- Botões de WhatsApp e Facebook -->
    <div class="social-buttons">
        <div class="social-btn whatsapp-btn" id="whatsapp-btn">
            <i class="fab fa-whatsapp"></i>
            <div class="social-tooltip">Suporte WhatsApp</div>
        </div>
        <div class="social-btn facebook-btn" id="facebook-btn">
            <i class="fab fa-facebook-f"></i>
            <div class="social-tooltip">Página Facebook</div>
        </div>
    </div>
    
    <div class="theme-toggle" id="theme-toggle">
        <i class="fas fa-moon"></i>
    </div>
    
    <header>
        <div class="container">
            <div class="logo">Amazon Money</div>
            <div class="tagline">Ganhe 2MT por cadastro + 5 minutos de visualização diária</div>
        </div>
    </header>
    
    <div class="container">
        <!-- Tela de Login/Registro -->
        <div id="auth-screen" class="card">
            <h2 class="card-title"><i class="fas fa-user"></i> Entrar / Registar</h2>
            <div id="auth-alert" class="alert" style="display: none;"></div>
            
            <div class="form-group">
                <label for="phone"><i class="fas fa-phone"></i> Número de Telefone</label>
                <input type="tel" id="phone" placeholder="+258" required>
            </div>
            
            <div class="form-group">
                <label for="password"><i class="fas fa-lock"></i> Palavra-passe</label>
                <input type="password" id="password" placeholder="Mínimo 6 caracteres" required>
            </div>
            
            <!-- Código de referência apenas no registro -->
            <div id="referral-code-group" class="form-group" style="display: none;">
                <label for="referral-code"><i class="fas fa-user-friends"></i> Código de Referência (opcional)</label>
                <input type="text" id="referral-code" placeholder="Código do amigo">
            </div>
            
            <button id="login-btn" class="btn-full"><i class="fas fa-sign-in-alt"></i> Entrar</button>
            <button id="register-btn" class="secondary btn-full" style="margin-top: 10px;"><i class="fas fa-user-plus"></i> Registar <span class="bonus-badge">+2MT</span></button>
            
            <div style="text-align: center; margin-top: 15px;">
                <a href="#" id="toggle-auth" style="color: var(--primary); text-decoration: none; font-weight: 500;">
                    Não tem conta? Clique aqui para registar
                </a>
            </div>
        </div>
        
        <!-- Dashboard do Usuário -->
        <div id="dashboard" class="dashboard">
            <!-- Banner de Login Primária -->
            <div id="primary-login-banner" class="login-bonus" style="display: none;">
                <h3> Login Primária Concluído!</h3>
                <p>Você ganhou <strong>1 MT</strong> pelo seu primeiro login do dia!</p>
            </div>
            
            <div class="card">
                <!-- Carteira de Saldo -->
                <div class="wallet-container">
                    <div class="total-balance">
                        <div class="total-balance-label">Saldo Total Disponível</div>
                        <div class="total-balance-amount" id="total-balance">0 MT</div>
                        <div class="balance-actions">
                            <button class="btn-small success" id="transfer-to-main">
                                <i class="fas fa-exchange-alt"></i> Transferir Bónus
                            </button>
                            <button class="btn-small purple" id="transfer-mining">
                                <i class="fas fa-coins"></i> Transferir Mineração
                            </button>
                        </div>
                    </div>
                    
                    <div class="wallet-grid">
                        <div class="wallet-card principal">
                            <div class="wallet-icon">
                                <i class="fas fa-wallet"></i>
                            </div>
                            <div class="wallet-label">Saldo Principal</div>
                            <div class="wallet-amount" id="wallet-main">0 MT</div>
                            <div class="wallet-description">Para levantamentos e investimentos</div>
                        </div>
                        
                        <div class="wallet-card bonus">
                            <div class="wallet-icon">
                                <i class="fas fa-gift"></i>
                            </div>
                            <div class="wallet-label">Saldo de Bónus</div>
                            <div class="wallet-amount" id="wallet-bonus">0 MT</div>
                            <div class="wallet-description">Bónus de registo e referências</div>
                        </div>
                        
                        <div class="wallet-card mining">
                            <div class="wallet-icon">
                                <i class="fas fa-server"></i>
                            </div>
                            <div class="wallet-label">Saldo de Mineração</div>
                            <div class="wallet-amount" id="wallet-mining">0 MT</div>
                            <div class="wallet-description">Lucros das máquinas de mineração</div>
                        </div>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-logins">0</div>
                        <div class="stat-label">Logins Hoje</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="primary-logins">0</div>
                        <div class="stat-label">Login Primária</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-earned">0 MT</div>
                        <div class="stat-label">Total Ganho</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="referral-count">0</div>
                        <div class="stat-label">Referências</div>
                    </div>
                </div>
                
                <div class="consecutive-days" id="consecutive-days">
                    <!-- Dias consecutivos serão preenchidos dinamicamente -->
                </div>
                
                <div class="timer-container">
                    <h3><i class="fas fa-clock"></i> Tempo de Visualização Diário</h3>
                    <div class="timer-progress">
                        <div class="timer-progress-circle" id="timer-progress">
                            <div class="timer" id="timer">05:00</div>
                        </div>
                    </div>
                    <button id="start-timer" class="secondary btn-full"><i class="fas fa-play"></i> Iniciar Visualização</button>
                    <p style="margin-top: 10px; font-size: 14px; color: var(--gray);">
                        Complete 5 minutos e ganhe <strong>0.10 MT</strong> todos os dias!
                    </p>
                </div>
                
                <div class="referral-code">
                    <i class="fas fa-share-alt"></i> Seu código de referência: 
                    <span id="user-referral-code">CARREGANDO...</span>
                    <button id="copy-referral-code" class="copy-btn"><i class="fas fa-copy"></i> Copiar</button>
                    <p style="margin-top: 10px; font-size: 14px;">
                        Compartilhe este código e ganhe <strong>2 MT</strong> por cada amigo que se registar!
                    </p>
                    
                    <!-- Botões de compartilhamento social -->
                    <div class="social-share">
                        <div class="social-share-btn whatsapp-btn" id="share-whatsapp">
                            <i class="fab fa-whatsapp"></i>
                        </div>
                        <div class="social-share-btn facebook-btn" id="share-facebook">
                            <i class="fab fa-facebook-f"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-container">
                <div class="tab active" data-tab="mining"><i class="fas fa-server"></i> Mineração</div>
                <div class="tab" data-tab="deposit"><i class="fas fa-money-bill-wave"></i> Depositar</div>
                <div class="tab" data-tab="withdraw"><i class="fas fa-wallet"></i> Levantamentos</div>
                <div class="tab" data-tab="history"><i class="fas fa-history"></i> Histórico</div>
                <div class="tab" data-tab="referrals"><i class="fas fa-user-friends"></i> Referências</div>
                <div class="tab" data-tab="profile"><i class="fas fa-user"></i> Perfil</div>
            </div>
            
            <!-- Aba de Mineração -->
            <div id="mining-tab" class="tab-content active">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-server"></i> Máquinas de Mineração</h3>
                    <p>Invista em máquinas de mineração e receba lucros diários diretamente na sua carteira!</p>
                    
                    <div class="mining-stats">
                        <div class="mining-stat">
                            <div class="mining-stat-value" id="total-mining-invested">0 MT</div>
                            <div class="mining-stat-label">Total Investido</div>
                        </div>
                        <div class="mining-stat">
                            <div class="mining-stat-value" id="total-mining-profit">0 MT</div>
                            <div class="mining-stat-label">Lucro Total</div>
                        </div>
                        <div class="mining-stat">
                            <div class="mining-stat-value" id="active-machines">0</div>
                            <div class="mining-stat-label">Máquinas Ativas</div>
                        </div>
                        <div class="mining-stat">
                            <div class="mining-stat-value" id="daily-mining-income">0 MT</div>
                            <div class="mining-stat-label">Renda Diária</div>
                        </div>
                    </div>
                    
                    <!-- Botões de Investimento Rápido -->
                    <div class="quick-invest-buttons">
                        <button class="quick-invest-btn" data-amount="500">
                            <i class="fas fa-bolt"></i> Investir 500 MT
                        </button>
                        <button class="quick-invest-btn" data-amount="1200">
                            <i class="fas fa-rocket"></i> Investir 1200 MT
                        </button>
                        <button class="quick-invest-btn" data-amount="2000">
                            <i class="fas fa-gem"></i> Investir 2000 MT
                        </button>
                        <button class="quick-invest-btn" data-amount="3500">
                            <i class="fas fa-crown"></i> Investir 3500 MT
                        </button>
                    </div>
                    
                    <div class="mining-machines" id="mining-machines-container">
                        <!-- Máquinas serão preenchidas dinamicamente -->
                    </div>
                    
                    <div id="active-mining-section" style="display: none;">
                        <h3 class="card-title" style="margin-top: 30px;"><i class="fas fa-cogs"></i> Suas Máquinas Ativas</h3>
                        <div id="active-mining-machines">
                            <!-- Máquinas ativas serão preenchidas dinamicamente -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Aba de Depósito -->
            <div id="deposit-tab" class="tab-content">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-money-bill-wave"></i> Depositar via Código Comercial</h3>
                    
                    <div class="paga-facil-info">
                        <div class="paga-facil-logo">
                            <span>PAGA FÁCIL</span>
                        </div>
                        <p>Depósito rápido e seguro usando código de comerciante</p>
                    </div>
                    
                    <div id="deposit-alert" class="alert" style="display: none;"></div>
                    
                    <div class="merchant-code">
                        Código do Comerciante: <span id="merchant-code">1198697</span>
                        <button id="copy-merchant-code" class="copy-btn"><i class="fas fa-copy"></i> Copiar</button>
                    </div>
                    
                    <div class="steps">
                        <div class="step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <strong>Para fazer o pagamento primeiro discar *150# e opção de chamada</strong>
                                <p>Na opções de M-Pesa selecionar opção 4 de seguida digite o código do comerciante que é 1198697.</p>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <strong>De seguida valor que pretende investir em seguida digite o seu PIN do M-Pesa</strong>
                                <p>Confirme com nome de Waite-Venda Online e aguarde pela confirmação do pagamento".</p>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <strong>Digite o código do comerciante</strong>
                                <p>Insira o código <strong>1198697</strong> no campo destinado ao código do comerciante.</p>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <strong>Digite o valor que deseja</strong>
                                <p> depositar e confirme a transação.</p>
                            </div>
                        </div>
                        
                        <div class="step">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <strong>Copia a mensagem do pagamento o ID de transação colar no ID de transação paga fácil</strong>
                                <p>Guarde o comprovante com você para melhor segurança
Vá embaixo e registe o depósito.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="deposit-amount"><i class="fas fa-money-bill"></i> Valor Depositado (MT)</label>
                        <input type="number" id="deposit-amount" min="300" placeholder="Mínimo: 300 MT" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="transaction-id"><i class="fas fa-receipt"></i> ID da Transação Paga Fácil</label>
                        <input type="text" id="transaction-id" placeholder="ID da transação:" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="deposit-phone"><i class="fas fa-phone"></i> Seu Número Paga Fácil</label>
                        <input type="tel" id="deposit-phone" placeholder="Número usado no Paga Fácil" required>
                    </div>
                    
                    <button id="confirm-deposit" class="success btn-full"><i class="fas fa-check-circle"></i> Confirmar Depósito</button>
                    
                    <div class="deposit-info">
                        <p><strong>Informações importantes:</strong></p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Verificar bem as informações </li>
                            <li>Saldo creditado em até 2 horas após confirmação</li>
                            <li>Guarde o comprovativo da transação</li>
                            <li>Em caso de problemas, contacte o suporte do WhatsApp</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Aba de Levantamentos -->
            <div id="withdraw-tab" class="tab-content">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-wallet"></i> Levantamentos</h3>
                    
                    <!-- Informações sobre M-Pesa E-mola -->
                    <div class="mpesa-emola-info">
                        <div class="mpesa-emola-logo">
                            <span>M-PESA E-MOLA</span>
                        </div>
                        <p>Levantamentos rápidos e seguros para sua carteira móvel</p>
                    </div>
                    
                    <div id="withdraw-alert" class="alert" style="display: none;"></div>
                    
                    <!-- Seção de conta vinculada -->
                    <div id="linked-account" class="linked-account">
                        <div class="account-details">
                            <div class="account-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="account-info">
                                <div class="account-name" id="account-name">Conta M-Pesa Vinculada</div>
                                <div class="account-number" id="account-number">+258 XXXXXXXX</div>
                            </div>
                            <button id="unlink-account" class="unlink-btn btn-small"><i class="fas fa-unlink"></i> Desvincular</button>
                        </div>
                        <p>Sua carteira móvel está vinculada e pronta para receber levantamentos.</p>
                    </div>
                    
                    <!-- Seção de vinculação de conta -->
                    <div id="link-account-section">
                        <h4 class="card-title" style="font-size: 18px; margin-top: 20px;"><i class="fas fa-link"></i> Vincular Carteira Móvel</h4>
                        <p>Para fazer levantamentos, primeiro vincule sua conta M-Pesa ou E-mola.</p>
                        
                        <div class="form-group">
                            <label for="mpesa-phone"><i class="fas fa-phone"></i> Número da Carteira Móvel</label>
                            <input type="tel" id="mpesa-phone" placeholder="+258" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="mpesa-name"><i class="fas fa-user"></i> Nome Completo (como registado no M-Pesa ou E-Mola)</label>
                            <input type="text" id="mpesa-name" placeholder="Seu nome completo" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="mpesa-pin"><i class="fas fa-lock"></i> Digite o seu  PIN(apenas para verificação)</label>
                            <input type="password" id="mpesa-pin" placeholder="PIN de 4 dígitos" maxlength="4" required>
                            <small style="color: var(--gray); font-size: 12px;">O PIN não é armazenado, é usado apenas para verificação de segurança.</small>
                        </div>
                        
                        <button id="link-account" class="success btn-full"><i class="fas fa-link"></i> Vincular Carteira Móvel</button>
                    </div>
                    
                    <!-- Seção de levantamento (após vinculação) -->
                    <div id="withdraw-section" style="display: none; margin-top: 30px;">
                        <h4 class="card-title" style="font-size: 18px;"><i class="fas fa-money-bill-wave"></i> Fazer Levantamento</h4>
                        
                        <div class="form-group">
                            <label for="withdraw-amount"><i class="fas fa-money-bill-wave"></i> Valor (MT)</label>
                            <input type="number" id="withdraw-amount" min="100" placeholder="Mínimo: 100 MT" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="withdraw-pin"><i class="fas fa-lock"></i> PIN M-Pesa</label>
                            <input type="password" id="withdraw-pin" placeholder="PIN de 4 dígitos" maxlength="4" required>
                        </div>
                        
                        <button id="request-withdraw" class="btn-full"><i class="fas fa-paper-plane"></i> Solicitar Levantamento</button>
                        
                        <div class="withdraw-info">
                            <p><strong>Informações importantes:</strong></p>
                            <ul style="margin-left: 20px; margin-top: 10px;">
                                <li>Valor mínimo para levantamento: 100 MT</li>
                                <li>Taxa de processamento: 5 MT por transação</li>
                                <li>Processamento em até 24 horas</li>
                                <li>Certifique-se que o número M-Pesa está correto</li>
                                <li>O PIN é necessário para autorizar a transação</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Aba de Histórico -->
            <div id="history-tab" class="tab-content">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-history"></i> Histórico de Transações</h3>
                    <div class="history" id="transaction-history">
                        <!-- Histórico será preenchido dinamicamente -->
                    </div>
                </div>
            </div>
            
            <!-- Aba de Referências -->
            <div id="referrals-tab" class="tab-content">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-user-friends"></i> Suas Referências</h3>
                    <p>Ganhe 2 MT por cada pessoa que se registar com o seu código!</p>
                    
                    <div class="referral-code" style="margin: 20px 0;">
                        <i class="fas fa-link"></i> Seu link de referência: <br>
                        <span id="user-referral-link">CARREGANDO...</span>
                        <button id="copy-referral-link" class="copy-btn"><i class="fas fa-copy"></i> Copiar</button>
                    </div>
                    
                    <div class="history">
                        <div class="history-item">
                            <span>Total de referências</span>
                            <span id="total-referrals">0</span>
                        </div>
                        <div class="history-item">
                            <span>Ganhos com referências</span>
                            <span class="positive" id="referral-earnings">0 MT</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Aba de Perfil -->
            <div id="profile-tab" class="tab-content">
                <div class="card">
                    <h3 class="card-title"><i class="fas fa-user"></i> Seu Perfil</h3>
                    
                    <div class="form-group">
                        <label><i class="fas fa-phone"></i> Número de Telefone</label>
                        <input type="text" id="profile-phone" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-calendar"></i> Data de Registro</label>
                        <input type="text" id="profile-register-date" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-chart-line"></i> Total Ganho</label>
                        <input type="text" id="profile-total-earned" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-money-bill"></i> Total Depositado</label>
                        <input type="text" id="profile-total-deposited" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-sign-in-alt"></i> Login Primária Hoje</label>
                        <input type="text" id="profile-primary-login" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-server"></i> Máquinas de Mineração</label>
                        <input type="text" id="profile-mining-machines" readonly>
                    </div>
                    
                    <!-- Informações da Carteira no Perfil -->
                    <div class="form-group">
                        <label><i class="fas fa-wallet"></i> Saldo Principal</label>
                        <input type="text" id="profile-wallet-main" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-gift"></i> Saldo de Bónus</label>
                        <input type="text" id="profile-wallet-bonus" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label><i class="fas fa-server"></i> Saldo de Mineração</label>
                        <input type="text" id="profile-wallet-mining" readonly>
                    </div>
                    
                    <!-- Informações da conta M-Pesa -->
                    <div class="form-group">
                        <label><i class="fas fa-mobile-alt"></i> Conta M-Pesa Vinculada</label>
                        <input type="text" id="profile-mpesa-account" readonly value="Não vinculada">
                    </div>
                    
                    <button id="logout-btn" class="secondary btn-full"><i class="fas fa-sign-out-alt"></i> Terminar Sessão</button>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>AmazonMoney &copy; 2025 - Ganhe 2MT por cadastro + 5 minutos de visualização diária</p>
            <p style="margin-top: 10px; font-size: 12px;"> <p>Investimento seguro e flexível e confortável Amazon um futuro para todos</p>
     
            </p>
        </div>
    </footer>

    <script>
        // Configurações das máquinas de mineração com lucro diário
        const miningMachines = [
            {
                id: 1,
                name: "Miner Básico",
                price: 500,
                return: 1400,
                dailyProfit: 20,
                duration: 70, // dias
                profit: "+900 MT",
                roi: "180% ROI",
                icon: "fas fa-microchip",
                featured: false,
                description: "Ideal para iniciantes"
            },
            {
                id: 2,
                name: "Miner Intermédio",
                price: 1200,
                return: 2250,
                dailyProfit: 25,
                duration: 90,
                profit: "+1050 MT",
                roi: "87.5% ROI",
                icon: "fas fa-server",
                featured: true,
                description: "Melhor custo-benefício"
            },
            {
                id: 3,
                name: "Miner Avançado",
                price: 2000,
                return: 3850,
                dailyProfit: 35,
                duration: 110,
                profit: "+1850 MT",
                roi: "92.5% ROI",
                icon: "fas fa-network-wired",
                featured: false,
                description: "Alta performance"
            },
            {
                id: 4,
                name: "Miner Profissional",
                price: 3500,
                return: 5400,
                dailyProfit: 60,
                duration: 90,
                profit: "+1900 MT",
                roi: "54.3% ROI",
                icon: "fas fa-hdd",
                featured: false,
                description: "Para investidores"
            },
            {
                id: 5,
                name: "Miner Master",
                price: 5200,
                return: 8500,
                dailyProfit: 85,
                duration: 100,
                profit: "+3300 MT",
                roi: "63.5% ROI",
                icon: "fas fa-database",
                featured: false,
                description: "Máximo retorno"
            },
            {
                id: 6,
                name: "Miner Elite",
                price: 10500,
                return: 14400,
                dailyProfit: 120,
                duration: 120,
                profit: "+3900 MT",
                roi: "37.1% ROI",
                icon: "fas fa-server",
                featured: false,
                description: "Para grandes investidores"
            },
            {
                id: 7,
                name: "Miner Premium",
                price: 20000,
                return: 28800,
                dailyProfit: 160,
                duration: 180,
                profit: "+8800 MT",
                roi: "44% ROI",
                icon: "fas fa-server",
                featured: false,
                description: "Investimento de longo prazo"
            }
        ];

        // Classe principal para gerenciar a aplicação
        class AmazonMoneyApp {
            constructor() {
                this.currentUser = null;
                this.timerInterval = null;
                this.timeLeft = 300; // 5 minutos em segundos
                this.timerRunning = false;
                this.miningInterval = null;
                this.isRegisterMode = false;
                this.loginAttempts = 0;
                this.maxLoginAttempts = 5;
                
                this.init();
            }
            
            init() {
                // Verificar se o usuário já está logado
                this.checkLoginStatus();
                
                // Event Listeners
                document.getElementById('login-btn').addEventListener('click', () => this.login());
                document.getElementById('register-btn').addEventListener('click', () => this.register());
                document.getElementById('request-withdraw').addEventListener('click', () => this.requestWithdraw());
                document.getElementById('confirm-deposit').addEventListener('click', () => this.confirmDeposit());
                document.getElementById('logout-btn').addEventListener('click', () => this.logout());
                document.getElementById('start-timer').addEventListener('click', () => this.toggleTimer());
                
                // Botões de transferência entre carteiras
                document.getElementById('transfer-to-main').addEventListener('click', () => this.transferBonusToMain());
                document.getElementById('transfer-mining').addEventListener('click', () => this.transferMiningToMain());
                
                // Alternar entre login e registro
                document.getElementById('toggle-auth').addEventListener('click', (e) => {
                    e.preventDefault();
                    this.toggleAuthMode();
                });
                
                // Botões de cópia
                document.getElementById('copy-referral-code').addEventListener('click', () => {
                    this.copyToClipboard(document.getElementById('user-referral-code').textContent);
                    this.showNotification('Código de referência copiado!', 'success');
                });
                
                document.getElementById('copy-referral-link').addEventListener('click', () => {
                    this.copyToClipboard(document.getElementById('user-referral-link').textContent);
                    this.showNotification('Link de referência copiado!', 'success');
                });
                
                document.getElementById('copy-merchant-code').addEventListener('click', () => {
                    this.copyToClipboard(document.getElementById('merchant-code').textContent);
                    this.showNotification('Código do comerciante copiado!', 'success');
                });
                
                // Botões de investimento rápido
                document.querySelectorAll('.quick-invest-btn').forEach(button => {
                    button.addEventListener('click', () => {
                        const amount = parseInt(button.getAttribute('data-amount'));
                        this.quickInvest(amount);
                    });
                });
                
                // Verificar código de referência na URL
                this.checkUrlReferral();
                
                // Tabs
                const tabs = document.querySelectorAll('.tab');
                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        // Remover classe active de todas as tabs
                        tabs.forEach(t => t.classList.remove('active'));
                        // Adicionar classe active à tab clicada
                        tab.classList.add('active');
                        
                        // Esconder todos os conteúdos
                        const tabContents = document.querySelectorAll('.tab-content');
                        tabContents.forEach(content => content.classList.remove('active'));
                        
                        // Mostrar o conteúdo correspondente
                        const tabId = tab.getAttribute('data-tab') + '-tab';
                        document.getElementById(tabId).classList.add('active');
                        
                        // Atualizar seção de levantamentos se necessário
                        if (tabId === 'withdraw-tab') {
                            this.updateWithdrawSection();
                        }
                    });
                });
                
                // Tema escuro/claro
                document.getElementById('theme-toggle').addEventListener('click', () => this.toggleTheme());
                
                // Modal de confirmação
                document.getElementById('confirmation-cancel').addEventListener('click', () => this.hideConfirmation());
                
                // M-Pesa E-mola
                document.getElementById('link-account').addEventListener('click', () => this.linkMpesaAccount());
                document.getElementById('unlink-account').addEventListener('click', () => this.unlinkMpesaAccount());
                
                // Botões de WhatsApp e Facebook
                document.getElementById('whatsapp-btn').addEventListener('click', () => this.openWhatsApp());
                document.getElementById('facebook-btn').addEventListener('click', () => this.openFacebook());
                document.getElementById('share-whatsapp').addEventListener('click', () => this.shareViaWhatsApp());
                document.getElementById('share-facebook').addEventListener('click', () => this.shareViaFacebook());
                
                // Iniciar verificação de mineração
                this.startMiningCheck();
            }
            
            // Abrir WhatsApp para suporte
            openWhatsApp() {
                const phoneNumber = "25884 6678415";
                const message = "Olá! Preciso de ajuda com a Amazon Money.";
                const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            }
            
            // Abrir página do Facebook
            openFacebook() {
                // Substitua pela URL real da página do Facebook
                const facebookUrl = "https://facebook.com/AmazonMoneyMZ";
                window.open(facebookUrl, '_blank');
            }
            
            // Compartilhar via WhatsApp
            shareViaWhatsApp() {
                if (!this.currentUser) return;
                
                const referralCode = this.currentUser.referralCode;
                const message = `💸 *Amazon Money* - Ganhe 2MT por cadastro!\n\n` +
                               `Registe-se usando meu código de referência: *${referralCode}*\n\n` +
                               `✅ Ganhe 2MT de bónus no registo\n` +
                               `✅ 5 minutos de visualização = 0.10MT\n` +
                               `✅ Investimentos com retorno garantido\n` +
                               `✅ Levantamentos rápidos via M-Pesa\n\n` +
                               `🔗 ${window.location.href.split('?')[0]}?ref=${referralCode}`;
                
                const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
                window.open(url, '_blank');
            }
            
            // Compartilhar via Facebook
            shareViaFacebook() {
                if (!this.currentUser) return;
                
                const referralLink = `${window.location.href.split('?')[0]}?ref=${this.currentUser.referralCode}`;
                const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(referralLink)}`;
                window.open(url, '_blank', 'width=600,height=400');
            }
            
            // Alternar entre modo de login e registro
            toggleAuthMode() {
                this.isRegisterMode = !this.isRegisterMode;
                const referralCodeGroup = document.getElementById('referral-code-group');
                const loginBtn = document.getElementById('login-btn');
                const registerBtn = document.getElementById('register-btn');
                const toggleAuth = document.getElementById('toggle-auth');
                
                if (this.isRegisterMode) {
                    // Modo de registro
                    referralCodeGroup.style.display = 'block';
                    loginBtn.style.display = 'none';
                    registerBtn.style.display = 'block';
                    toggleAuth.textContent = 'Já tem conta? Clique aqui para entrar';
                } else {
                    // Modo de login
                    referralCodeGroup.style.display = 'none';
                    loginBtn.style.display = 'block';
                    registerBtn.style.display = 'none';
                    toggleAuth.textContent = 'Não tem conta? Clique aqui para registar';
                }
            }
            
            // Verificar status de login
            checkLoginStatus() {
                const savedUser = localStorage.getItem('currentUser');
                if (savedUser) {
                    this.currentUser = JSON.parse(savedUser);
                    // Garantir que a estrutura da carteira existe
                    this.ensureWalletStructure();
                    this.showDashboard();
                }
            }
            
            // Garantir que a estrutura da carteira existe
            ensureWalletStructure() {
                if (!this.currentUser.wallet) {
                    this.currentUser.wallet = {
                        main: 0,        // Saldo principal (para levantamentos)
                        bonus: 0,       // Saldo de bónus (registro, referências)
                        mining: 0       // Saldo de mineração (lucros das máquinas)
                    };
                }
                
                // Garantir que a estrutura M-Pesa existe
                if (!this.currentUser.mpesaAccount) {
                    this.currentUser.mpesaAccount = null;
                }
            }
            
            // Verificar código de referência na URL
            checkUrlReferral() {
                const urlParams = new URLSearchParams(window.location.search);
                const refCode = urlParams.get('ref');
                if (refCode) {
                    document.getElementById('referral-code').value = refCode;
                }
            }
            
            // Função de login
            login() {
                const phone = document.getElementById('phone').value;
                const password = document.getElementById('password').value;
                const authAlert = document.getElementById('auth-alert');
                
                if (!phone || !password) {
                    this.showAlert(authAlert, 'Por favor, preencha todos os campos.', 'error');
                    return;
                }
                
                // Verificar se excedeu o número de tentativas
                if (this.loginAttempts >= this.maxLoginAttempts) {
                    this.showAlert(authAlert, 'Número máximo de tentativas excedido. Tente novamente mais tarde.', 'error');
                    return;
                }
                
                // Verificar se o usuário existe
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const user = users.find(u => u.phone === phone && u.password === password);
                
                if (user) {
                    this.currentUser = user;
                    this.ensureWalletStructure();
                    
                    // Resetar tentativas de login
                    this.loginAttempts = 0;
                    
                    // Verificar login primária
                    this.checkPrimaryLogin();
                    
                    // Verificar e processar lucros de mineração diária
                    this.checkDailyMiningProfits();
                    
                    localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
                    this.showDashboard();
                    this.showNotification('Login realizado com sucesso!', 'success');
                } else {
                    this.loginAttempts++;
                    const remainingAttempts = this.maxLoginAttempts - this.loginAttempts;
                    this.showAlert(authAlert, `Número de telefone ou palavra-passe incorretos. ${remainingAttempts > 0 ? `${remainingAttempts} tentativas restantes.` : 'Conta bloqueada temporariamente.'}`, 'error');
                }
            }
            
            // Verificar e processar lucros de mineração diária
            checkDailyMiningProfits() {
                if (!this.currentUser.miningMachines || this.currentUser.miningMachines.length === 0) return;
                
                const today = new Date().toDateString();
                const lastProfitCheck = localStorage.getItem(`lastProfitCheck_${this.currentUser.phone}`);
                
                // Se já verificamos hoje, não processar novamente
                if (lastProfitCheck === today) return;
                
                let totalDailyProfit = 0;
                
                this.currentUser.miningMachines.forEach(machine => {
                    const now = new Date().getTime();
                    const startTime = new Date(machine.startTime).getTime();
                    const endTime = startTime + (machine.duration * 24 * 60 * 60 * 1000); // Converter dias para milissegundos
                    
                    // Se a máquina ainda está ativa, adicionar lucro diário
                    if (now < endTime) {
                        totalDailyProfit += machine.dailyProfit;
                    }
                });
                
                // Adicionar lucro diário ao saldo de mineração
                if (totalDailyProfit > 0) {
                    this.currentUser.wallet.mining += totalDailyProfit;
                    this.currentUser.transactions.push({
                        type: 'mining_daily',
                        amount: totalDailyProfit,
                        description: `Lucro diário de mineração`,
                        date: new Date().toISOString(),
                        wallet: 'mining'
                    });
                    
                    this.showNotification(`Recebeu ${totalDailyProfit} MT de lucro diário das suas máquinas de mineração!`, 'success');
                }
                
                // Atualizar último check de lucro
                localStorage.setItem(`lastProfitCheck_${this.currentUser.phone}`, today);
            }
            
            // Verificar e processar login primária
            checkPrimaryLogin() {
                const today = new Date().toDateString();
                const lastLoginDate = localStorage.getItem(`lastLogin_${this.currentUser.phone}`);
                
                // Se não fez login hoje, é login primária
                if (lastLoginDate !== today) {
                    // Primeiro login do dia - dar bônus
                    const primaryLoginBonus = 1; // 1 MT pelo primeiro login
                    this.currentUser.wallet.bonus += primaryLoginBonus;
                    this.currentUser.transactions.push({
                        type: 'primary_login',
                        amount: primaryLoginBonus,
                        description: 'Bónus de Login Primária',
                        date: new Date().toISOString(),
                        wallet: 'bonus'
                    });
                    
                    // Atualizar estatísticas
                    if (!this.currentUser.loginStats) {
                        this.currentUser.loginStats = {
                            totalLogins: 0,
                            primaryLogins: 0,
                            consecutiveDays: 0
                        };
                    }
                    
                    this.currentUser.loginStats.totalLogins++;
                    this.currentUser.loginStats.primaryLogins++;
                    
                    // Verificar dias consecutivos
                    const yesterday = new Date();
                    yesterday.setDate(yesterday.getDate() - 1);
                    const yesterdayString = yesterday.toDateString();
                    
                    if (lastLoginDate === yesterdayString) {
                        this.currentUser.loginStats.consecutiveDays++;
                    } else {
                        this.currentUser.loginStats.consecutiveDays = 1;
                    }
                    
                    // Mostrar banner de login primária
                    document.getElementById('primary-login-banner').style.display = 'block';
                    
                    // Atualizar último login
                    localStorage.setItem(`lastLogin_${this.currentUser.phone}`, today);
                    
                    // Atualizar usuário no localStorage
                    this.updateUserInStorage();
                    
                    this.showNotification(`Login primária! Ganhou ${primaryLoginBonus} MT de bónus.`, 'success');
                } else {
                    // Já fez login hoje, apenas atualizar contador
                    if (this.currentUser.loginStats) {
                        this.currentUser.loginStats.totalLogins++;
                    }
                    document.getElementById('primary-login-banner').style.display = 'none';
                }
            }
            
            // Função de registro
            register() {
                const phone = document.getElementById('phone').value;
                const password = document.getElementById('password').value;
                const referralCode = document.getElementById('referral-code').value;
                const authAlert = document.getElementById('auth-alert');
                
                if (!phone || !password) {
                    this.showAlert(authAlert, 'Por favor, preencha todos os campos obrigatórios.', 'error');
                    return;
                }
                
                if (password.length < 6) {
                    this.showAlert(authAlert, 'A palavra-passe deve ter pelo menos 6 caracteres.', 'error');
                    return;
                }
                
                // Validar formato do número de telefone
                if (!this.validatePhone(phone)) {
                    this.showAlert(authAlert, 'Por favor, insira um número de telefone válido.', 'error');
                    return;
                }
                
                // Verificar se o usuário já existe
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                if (users.find(u => u.phone === phone)) {
                    this.showAlert(authAlert, 'Este número de telefone já está registado.', 'error');
                    return;
                }
                
                // Criar novo usuário
                const newUser = {
                    phone: phone,
                    password: password,
                    wallet: {
                        main: 0,        // Saldo principal
                        bonus: 2,      // 2 MT de bónus de registro
                        mining: 0       // Saldo de mineração
                    },
                    referralCode: this.generateReferralCode(),
                    referredBy: referralCode || null,
                    referrals: [],
                    transactions: [
                        {
                            type: 'bonus',
                            amount: 2,
                            description: 'Bónus de registro',
                            date: new Date().toISOString(),
                            wallet: 'bonus'
                        }
                    ],
                    registerDate: new Date().toISOString(),
                    dailyTimerUsed: false,
                    totalDeposited: 0,
                    miningMachines: [],
                    loginStats: {
                        totalLogins: 1,
                        primaryLogins: 1,
                        consecutiveDays: 1
                    },
                    mpesaAccount: null
                };
                
                users.push(newUser);
                localStorage.setItem('users', JSON.stringify(users));
                
                // Se foi usado um código de referência, adicionar bónus ao referenciador
                if (referralCode) {
                    const referrer = users.find(u => u.referralCode === referralCode);
                    if (referrer) {
                        referrer.wallet.bonus += 2;
                        referrer.transactions.push({
                            type: 'referral',
                            amount: 2,
                            description: `Bónus de referência: ${phone}`,
                            date: new Date().toISOString(),
                            wallet: 'bonus'
                        });
                        referrer.referrals.push(phone);
                        localStorage.setItem('users', JSON.stringify(users));
                    }
                }
                
                this.currentUser = newUser;
                
                // Registrar primeiro login
                const today = new Date().toDateString();
                localStorage.setItem(`lastLogin_${this.currentUser.phone}`, today);
                
                localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
                this.showDashboard();
                
                // Mostrar banner de login primária para novo usuário
                document.getElementById('primary-login-banner').style.display = 'block';
                
                this.showNotification('Registro realizado com sucesso! Ganhou 2 MT de bónus + 1 MT de login primária.', 'success');
            }
            
            // Validar número de telefone
            validatePhone(phone) {
                // Validação básica - pode ser melhorada conforme necessário
                const phoneRegex = /^\+?[\d\s\-\(\)]{8,}$/;
                return phoneRegex.test(phone);
            }
            
            // Mostrar dashboard
            showDashboard() {
                document.getElementById('auth-screen').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                
                // Atualizar informações do usuário
                this.updateUserInfo();
                
                // Atualizar máquinas de mineração
                this.updateMiningMachines();
                this.updateActiveMiningMachines();
                
                // Atualizar seção de levantamentos
                this.updateWithdrawSection();
            }
            
            // Atualizar informações do usuário
            updateUserInfo() {
                if (!this.currentUser) return;
                
                // Atualizar carteira
                this.updateWalletDisplay();
                
                document.getElementById('user-referral-code').textContent = this.currentUser.referralCode;
                document.getElementById('user-referral-link').textContent = window.location.href.split('?')[0] + '?ref=' + this.currentUser.referralCode;
                
                // Atualizar estatísticas de referências
                document.getElementById('total-referrals').textContent = this.currentUser.referrals.length;
                const referralTotal = this.currentUser.transactions
                    .filter(t => t.type === 'referral')
                    .reduce((sum, t) => sum + t.amount, 0);
                document.getElementById('referral-earnings').textContent = referralTotal + ' MT';
                
                // Atualizar estatísticas de login
                if (this.currentUser.loginStats) {
                    document.getElementById('total-logins').textContent = this.currentUser.loginStats.totalLogins;
                    document.getElementById('primary-logins').textContent = this.currentUser.loginStats.primaryLogins;
                }
                
                // Atualizar histórico
                this.updateTransactionHistory();
                
                // Atualizar perfil
                this.updateProfile();
                
                // Atualizar indicador de dias consecutivos
                this.updateConsecutiveDays();
                
                // Verificar se o timer diário já foi usado hoje
                const today = new Date().toDateString();
                const lastTimerUse = localStorage.getItem(`timerUsed_${this.currentUser.phone}`);
                const startTimerBtn = document.getElementById('start-timer');
                const timerDisplay = document.getElementById('timer');
                const timerProgress = document.getElementById('timer-progress');
                
                if (lastTimerUse === today) {
                    startTimerBtn.disabled = true;
                    startTimerBtn.textContent = 'Minutos Diário Já Utilizado';
                    timerDisplay.textContent = '00:00';
                    timerProgress.style.background = 'conic-gradient(var(--secondary) 100%, var(--gray-light) 0%)';
                } else {
                    startTimerBtn.disabled = false;
                    startTimerBtn.textContent = 'Iniciar Visualização';
                    timerDisplay.textContent = '05:00';
                    this.timeLeft = 300;
                    timerProgress.style.background = 'conic-gradient(var(--secondary) 0%, var(--gray-light) 0%)';
                }
            }
            
            // Atualizar display da carteira - MODIFICADO PARA NÃO MOSTRAR CENTAVOS
            updateWalletDisplay() {
                // Usar Math.floor para remover decimais
                const totalBalance = Math.floor(this.currentUser.wallet.main + this.currentUser.wallet.bonus + this.currentUser.wallet.mining);
                const walletMain = Math.floor(this.currentUser.wallet.main);
                const walletBonus = Math.floor(this.currentUser.wallet.bonus);
                const walletMining = Math.floor(this.currentUser.wallet.mining);
                
                document.getElementById('total-balance').textContent = totalBalance + ' MT';
                document.getElementById('wallet-main').textContent = walletMain + ' MT';
                document.getElementById('wallet-bonus').textContent = walletBonus + ' MT';
                document.getElementById('wallet-mining').textContent = walletMining + ' MT';
                
                // Atualizar botões de transferência
                document.getElementById('transfer-to-main').disabled = this.currentUser.wallet.bonus <= 0;
                document.getElementById('transfer-mining').disabled = this.currentUser.wallet.mining <= 0;
            }
            
            // Transferir saldo de bónus para principal
            transferBonusToMain() {
                if (this.currentUser.wallet.bonus <= 0) {
                    this.showNotification('Não tem saldo de bónus para transferir!', 'error');
                    return;
                }
                
                // Mostrar confirmação
                this.showConfirmation(
                    'Transferir Bónus para Saldo Principal',
                    `Tem certeza que deseja transferir ${Math.floor(this.currentUser.wallet.bonus)} MT do saldo de bónus para o saldo principal?`,
                    () => {
                        const amount = this.currentUser.wallet.bonus;
                        this.currentUser.wallet.bonus = 0;
                        this.currentUser.wallet.main += amount;
                        
                        this.currentUser.transactions.push({
                            type: 'transfer',
                            amount: amount,
                            description: 'Transferência de bónus para saldo principal',
                            date: new Date().toISOString(),
                            wallet: 'bonus_to_main'
                        });
                        
                        this.updateUserInStorage();
                        this.updateWalletDisplay();
                        this.updateProfile();
                        
                        this.showNotification(`Transferiu ${Math.floor(amount)} MT de bónus para o saldo principal!`, 'success');
                    }
                );
            }
            
            // Transferir saldo de mineração para principal
            transferMiningToMain() {
                if (this.currentUser.wallet.mining <= 0) {
                    this.showNotification('Não tem saldo de mineração para transferir!', 'error');
                    return;
                }
                
                // Mostrar confirmação
                this.showConfirmation(
                    'Transferir Mineração para Saldo Principal',
                    `Tem certeza que deseja transferir ${Math.floor(this.currentUser.wallet.mining)} MT do saldo de mineração para o saldo principal?`,
                    () => {
                        const amount = this.currentUser.wallet.mining;
                        this.currentUser.wallet.mining = 0;
                        this.currentUser.wallet.main += amount;
                        
                        this.currentUser.transactions.push({
                            type: 'transfer',
                            amount: amount,
                            description: 'Transferência de mineração para saldo principal',
                            date: new Date().toISOString(),
                            wallet: 'mining_to_main'
                        });
                        
                        this.updateUserInStorage();
                        this.updateWalletDisplay();
                        this.updateProfile();
                        
                        this.showNotification(`Transferiu ${Math.floor(amount)} MT de mineração para o saldo principal!`, 'success');
                    }
                );
            }
            
            // Atualizar indicador de dias consecutivos
            updateConsecutiveDays() {
                if (!this.currentUser.loginStats) return;
                
                const consecutiveDaysContainer = document.getElementById('consecutive-days');
                consecutiveDaysContainer.innerHTML = '';
                const consecutiveDays = this.currentUser.loginStats.consecutiveDays || 0;
                
                // Criar indicadores para os últimos 7 dias
                for (let i = 6; i >= 0; i--) {
                    const dayIndicator = document.createElement('div');
                    dayIndicator.className = 'day-indicator';
                    
                    // Verificar se é um dia com login
                    if (i < consecutiveDays) {
                        dayIndicator.classList.add('active');
                    }
                    
                    // Marcar o dia atual
                    if (i === 0) {
                        dayIndicator.classList.add('today');
                    }
                    
                    consecutiveDaysContainer.appendChild(dayIndicator);
                }
                
                // Adicionar texto informativo
                const infoText = document.createElement('div');
                infoText.textContent = `${consecutiveDays} dias consecutivos`;
                infoText.style.fontSize = '14px';
                infoText.style.color = 'var(--gray)';
                infoText.style.marginTop = '10px';
                consecutiveDaysContainer.appendChild(infoText);
            }
            
            // Atualizar histórico de transações
            updateTransactionHistory() {
                const transactionHistory = document.getElementById('transaction-history');
                transactionHistory.innerHTML = '';
                
                if (this.currentUser.transactions.length === 0) {
                    transactionHistory.innerHTML = '<div class="history-item">Nenhuma transação encontrada</div>';
                    return;
                }
                
                // Ordenar transações por data (mais recente primeiro)
                const sortedTransactions = [...this.currentUser.transactions].sort((a, b) => 
                    new Date(b.date) - new Date(a.date)
                );
                
                sortedTransactions.forEach(transaction => {
                    const item = document.createElement('div');
                    item.className = 'history-item';
                    
                    const details = document.createElement('div');
                    details.className = 'history-item-details';
                    
                    const description = document.createElement('span');
                    description.textContent = transaction.description;
                    
                    const date = document.createElement('span');
                    date.className = 'history-item-date';
                    date.textContent = new Date(transaction.date).toLocaleDateString('pt-PT', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                    
                    details.appendChild(description);
                    details.appendChild(date);
                    
                    const amount = document.createElement('span');
                    
                    if (transaction.type === 'withdraw') {
                        amount.textContent = '-' + Math.floor(transaction.amount) + ' MT';
                        amount.className = 'negative';
                    } else if (transaction.type === 'deposit') {
                        amount.textContent = '+' + Math.floor(transaction.amount) + ' MT';
                        amount.className = 'info';
                    } else if (transaction.type === 'primary_login') {
                        amount.textContent = '+' + Math.floor(transaction.amount) + ' MT';
                        amount.className = 'purple-text';
                    } else if (transaction.type === 'mining_daily') {
                        amount.textContent = '+' + Math.floor(transaction.amount) + ' MT';
                        amount.className = 'positive';
                    } else if (transaction.type === 'transfer') {
                        amount.textContent = '↔ ' + Math.floor(transaction.amount) + ' MT';
                        amount.className = 'info';
                    } else {
                        amount.textContent = '+' + Math.floor(transaction.amount) + ' MT';
                        amount.className = 'positive';
                    }
                    
                    item.appendChild(details);
                    item.appendChild(amount);
                    transactionHistory.appendChild(item);
                });
            }
            
            // Atualizar perfil
            updateProfile() {
                document.getElementById('profile-phone').value = this.currentUser.phone;
                
                const registerDate = new Date(this.currentUser.registerDate);
                document.getElementById('profile-register-date').value = registerDate.toLocaleDateString('pt-PT');
                
                const totalEarnedValue = this.currentUser.transactions
                    .filter(t => t.type !== 'withdraw' && t.type !== 'deposit')
                    .reduce((sum, t) => sum + t.amount, 0);
                document.getElementById('profile-total-earned').value = Math.floor(totalEarnedValue) + ' MT';
                document.getElementById('total-earned').textContent = Math.floor(totalEarnedValue) + ' MT';
                
                document.getElementById('profile-total-deposited').value = Math.floor(this.currentUser.totalDeposited) + ' MT';
                
                if (this.currentUser.loginStats) {
                    document.getElementById('profile-primary-login').value = this.currentUser.loginStats.primaryLogins > 0 ? 'Sim' : 'Não';
                }
                
                document.getElementById('profile-mining-machines').value = this.currentUser.miningMachines ? this.currentUser.miningMachines.length : 0;
                
                document.getElementById('referral-count').textContent = this.currentUser.referrals.length;
                
                // Informações da carteira no perfil
                document.getElementById('profile-wallet-main').value = Math.floor(this.currentUser.wallet.main) + ' MT';
                document.getElementById('profile-wallet-bonus').value = Math.floor(this.currentUser.wallet.bonus) + ' MT';
                document.getElementById('profile-wallet-mining').value = Math.floor(this.currentUser.wallet.mining) + ' MT';
                
                // Informações da conta M-Pesa
                if (this.currentUser.mpesaAccount) {
                    document.getElementById('profile-mpesa-account').value = this.currentUser.mpesaAccount.phone;
                } else {
                    document.getElementById('profile-mpesa-account').value = 'Não vinculada';
                }
            }
            
            // Atualizar máquinas de mineração disponíveis
            updateMiningMachines() {
                const miningMachinesContainer = document.getElementById('mining-machines-container');
                miningMachinesContainer.innerHTML = '';
                
                miningMachines.forEach(machine => {
                    const machineElement = document.createElement('div');
                    machineElement.className = `mining-machine ${machine.featured ? 'featured' : ''}`;
                    
                    // Verificar saldo total para compra
                    const totalBalance = this.currentUser.wallet.main + this.currentUser.wallet.bonus + this.currentUser.wallet.mining;
                    const canPurchase = totalBalance >= machine.price;
                    
                    machineElement.innerHTML = `
                        <div class="machine-icon">
                            <i class="${machine.icon}"></i>
                        </div>
                        <div class="machine-name">${machine.name}</div>
                        <div class="machine-price">${machine.price} MT</div>
                        <div class="machine-return">Retorno Total: ${machine.return} MT</div>
                        <div class="machine-profit">Lucro Diário: ${machine.dailyProfit} MT</div>
                        <div class="machine-roi">${machine.roi}</div>
                        <div class="machine-timer">Duração: ${machine.duration} dias</div>
                        <div class="investment-buttons">
                            <button class="btn-small success purchase-mining" data-machine-id="${machine.id}" ${!canPurchase ? 'disabled' : ''}>
                                <i class="fas fa-shopping-cart"></i> Investir
                            </button>
                            <button class="btn-small info info-mining" data-machine-id="${machine.id}">
                                <i class="fas fa-info-circle"></i> Detalhes
                            </button>
                        </div>
                        <p style="font-size: 12px; color: var(--gray); margin-top: 10px;">${machine.description}</p>
                    `;
                    
                    miningMachinesContainer.appendChild(machineElement);
                });
                
                // Adicionar event listeners para os botões de compra
                document.querySelectorAll('.purchase-mining').forEach(button => {
                    button.addEventListener('click', () => {
                        const machineId = parseInt(button.getAttribute('data-machine-id'));
                        this.purchaseMiningMachine(machineId);
                    });
                });
                
                // Adicionar event listeners para os botões de informação
                document.querySelectorAll('.info-mining').forEach(button => {
                    button.addEventListener('click', () => {
                        const machineId = parseInt(button.getAttribute('data-machine-id'));
                        this.showMachineDetails(machineId);
                    });
                });
                
                // Atualizar estatísticas de mineração
                this.updateMiningStats();
            }
            
            // Mostrar detalhes da máquina
            showMachineDetails(machineId) {
                const machine = miningMachines.find(m => m.id === machineId);
                if (!machine) return;
                
                const message = `
                     ${machine.name}
                     Investimento: ${machine.price} MT
                     Retorno Total: ${machine.return} MT
                     Lucro Diário: ${machine.dailyProfit} MT
                     Duração: ${machine.duration} dias
                     ROI: ${machine.roi}
                    ${machine.description}
                `;
                
                this.showNotification(message, 'info');
            }
            
            // Investimento rápido
            quickInvest(amount) {
                // Encontrar a máquina correspondente ao valor
                const machine = miningMachines.find(m => m.price === amount);
                
                if (!machine) {
                    this.showNotification('Nenhuma máquina disponível para este valor!', 'error');
                    return;
                }
                
                // Verificar saldo total
                const totalBalance = this.currentUser.wallet.main + this.currentUser.wallet.bonus + this.currentUser.wallet.mining;
                if (totalBalance < amount) {
                    this.showNotification('Saldo insuficiente para este investimento!', 'error');
                    return;
                }
                
                // Comprar a máquina
                this.purchaseMiningMachine(machine.id);
            }
            
            // Atualizar máquinas de mineração ativas
            updateActiveMiningMachines() {
                const activeMiningSection = document.getElementById('active-mining-section');
                const activeMiningMachines = document.getElementById('active-mining-machines');
                
                if (!this.currentUser.miningMachines || this.currentUser.miningMachines.length === 0) {
                    activeMiningSection.style.display = 'none';
                    return;
                }
                
                activeMiningSection.style.display = 'block';
                activeMiningMachines.innerHTML = '';
                
                this.currentUser.miningMachines.forEach((machine, index) => {
                    const now = new Date().getTime();
                    const startTime = new Date(machine.startTime).getTime();
                    const endTime = startTime + (machine.duration * 24 * 60 * 60 * 1000); // Converter dias para milissegundos
                    const timeLeft = endTime - now;
                    const totalTime = machine.duration * 24 * 60 * 60 * 1000;
                    const progress = Math.max(0, Math.min(100, ((totalTime - timeLeft) / totalTime) * 100));
                    
                    let statusText = '';
                    let statusClass = '';
                    
                    if (timeLeft <= 0) {
                        statusText = 'Finalizada';
                        statusClass = 'success';
                    } else {
                        const daysLeft = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                        const hoursLeft = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        statusText = `${daysLeft}d ${hoursLeft}h restantes`;
                        statusClass = 'warning';
                    }
                    
                    const machineElement = document.createElement('div');
                    machineElement.className = `mining-machine active-mining`;
                    
                    machineElement.innerHTML = `
                        <div class="machine-icon">
                            <i class="${machine.icon}"></i>
                        </div>
                        <div class="machine-name">${machine.name}</div>
                        <div class="machine-price">Investido: ${machine.price} MT</div>
                        <div class="machine-return">Retorno Total: ${machine.return} MT</div>
                        <div class="machine-profit">Lucro Diário: ${machine.dailyProfit} MT</div>
                        <div class="machine-timer ${statusClass}">${statusText}</div>
                        <div class="mining-progress">
                            <div class="mining-progress-bar" style="width: ${progress}%"></div>
                        </div>
                        <button class="btn-full ${timeLeft <= 0 ? 'success' : 'secondary'} collect-mining" data-machine-index="${index}" ${timeLeft > 0 ? 'disabled' : ''}>
                            <i class="fas fa-coins"></i> ${timeLeft <= 0 ? 'Finalizar' : 'Em Andamento...'}
                        </button>
                    `;
                    
                    activeMiningMachines.appendChild(machineElement);
                });
                
                // Adicionar event listeners para os botões de coleta
                document.querySelectorAll('.collect-mining').forEach(button => {
                    button.addEventListener('click', () => {
                        const machineIndex = parseInt(button.getAttribute('data-machine-index'));
                        this.collectMiningProfit(machineIndex);
                    });
                });
                
                // Atualizar estatísticas de mineração
                this.updateMiningStats();
            }
            
            // Atualizar estatísticas de mineração
            updateMiningStats() {
                if (!this.currentUser.miningMachines) {
                    this.currentUser.miningMachines = [];
                }
                
                const totalInvested = this.currentUser.miningMachines.reduce((sum, machine) => sum + machine.price, 0);
                const totalProfit = this.currentUser.miningMachines
                    .filter(machine => {
                        const now = new Date().getTime();
                        const startTime = new Date(machine.startTime).getTime();
                        const endTime = startTime + (machine.duration * 24 * 60 * 60 * 1000);
                        return now >= endTime;
                    })
                    .reduce((sum, machine) => sum + (machine.return - machine.price), 0);
                
                const activeCount = this.currentUser.miningMachines.filter(machine => {
                    const now = new Date().getTime();
                    const startTime = new Date(machine.startTime).getTime();
                    const endTime = startTime + (machine.duration * 24 * 60 * 60 * 1000);
                    return now < endTime;
                }).length;
                
                const dailyIncome = this.currentUser.miningMachines
                    .filter(machine => {
                        const now = new Date().getTime();
                        const startTime = new Date(machine.startTime).getTime();
                        const endTime = startTime + (machine.duration * 24 * 60 * 60 * 1000);
                        return now < endTime;
                    })
                    .reduce((sum, machine) => sum + machine.dailyProfit, 0);
                
                document.getElementById('total-mining-invested').textContent = Math.floor(totalInvested) + ' MT';
                document.getElementById('total-mining-profit').textContent = Math.floor(totalProfit) + ' MT';
                document.getElementById('active-machines').textContent = activeCount;
                document.getElementById('daily-mining-income').textContent = Math.floor(dailyIncome) + ' MT';
            }
            
            // Comprar máquina de mineração
            purchaseMiningMachine(machineId) {
                const machine = miningMachines.find(m => m.id === machineId);
                
                if (!machine) {
                    this.showNotification('Máquina não encontrada!', 'error');
                    return;
                }
                
                // Verificar saldo total
                const totalBalance = this.currentUser.wallet.main + this.currentUser.wallet.bonus + this.currentUser.wallet.mining;
                if (totalBalance < machine.price) {
                    this.showNotification('Saldo insuficiente para comprar esta máquina!', 'error');
                    return;
                }
                
                // Mostrar confirmação
                this.showConfirmation(
                    'Confirmar Investimento',
                    `Tem certeza que deseja investir ${machine.price} MT na máquina ${machine.name}?`,
                    () => {
                        // Deduzir o valor do saldo (prioridade: principal -> bónus -> mineração)
                        let remainingCost = machine.price;
                        
                        // Usar saldo principal primeiro
                        if (this.currentUser.wallet.main >= remainingCost) {
                            this.currentUser.wallet.main -= remainingCost;
                            remainingCost = 0;
                        } else if (this.currentUser.wallet.main > 0) {
                            remainingCost -= this.currentUser.wallet.main;
                            this.currentUser.wallet.main = 0;
                        }
                        
                        // Usar saldo de bónus se necessário
                        if (remainingCost > 0 && this.currentUser.wallet.bonus >= remainingCost) {
                            this.currentUser.wallet.bonus -= remainingCost;
                            remainingCost = 0;
                        } else if (remainingCost > 0 && this.currentUser.wallet.bonus > 0) {
                            remainingCost -= this.currentUser.wallet.bonus;
                            this.currentUser.wallet.bonus = 0;
                        }
                        
                        // Usar saldo de mineração se necessário
                        if (remainingCost > 0 && this.currentUser.wallet.mining >= remainingCost) {
                            this.currentUser.wallet.mining -= remainingCost;
                            remainingCost = 0;
                        }
                        
                        // Adicionar máquina às máquinas ativas do usuário
                        if (!this.currentUser.miningMachines) {
                            this.currentUser.miningMachines = [];
                        }
                        
                        this.currentUser.miningMachines.push({
                            ...machine,
                            startTime: new Date().toISOString()
                        });
                        
                        // Registrar transação
                        this.currentUser.transactions.push({
                            type: 'mining_investment',
                            amount: -machine.price,
                            description: `Compra de ${machine.name}`,
                            date: new Date().toISOString(),
                            wallet: 'mixed'
                        });
                        
                        // Atualizar localStorage
                        this.updateUserInStorage();
                        this.updateUserInfo();
                        this.updateMiningMachines();
                        this.updateActiveMiningMachines();
                        
                        this.showNotification(`Máquina ${machine.name} comprada com sucesso! Começará a gerar ${machine.dailyProfit} MT por dia.`, 'success');
                    }
                );
            }
            
            // Coletar lucro da mineração
            collectMiningProfit(machineIndex) {
                if (!this.currentUser.miningMachines || !this.currentUser.miningMachines[machineIndex]) {
                    this.showNotification('Máquina não encontrada!', 'error');
                    return;
                }
                
                const machine = this.currentUser.miningMachines[machineIndex];
                const now = new Date().getTime();
                const startTime = new Date(machine.startTime).getTime();
                const endTime = startTime + (machine.duration * 24 * 60 * 60 * 1000);
                
                if (now < endTime) {
                    this.showNotification('Esta máquina ainda não terminou de minerar!', 'error');
                    return;
                }
                
                // Calcular lucro
                const profit = machine.return - machine.price;
                
                // Mostrar confirmação
                this.showConfirmation(
                    'Coletar Lucro de Mineração',
                    `Tem certeza que deseja coletar ${machine.return} MT de lucro da máquina ${machine.name}?`,
                    () => {
                        // Adicionar lucro ao saldo de mineração
                        this.currentUser.wallet.mining += machine.return;
                        
                        // Registrar transação
                        this.currentUser.transactions.push({
                            type: 'mining',
                            amount: machine.return,
                            description: `Lucro final de mineração: ${machine.name}`,
                            date: new Date().toISOString(),
                            wallet: 'mining'
                        });
                        
                        // Remover máquina da lista de ativas
                        this.currentUser.miningMachines.splice(machineIndex, 1);
                        
                        // Atualizar localStorage
                        this.updateUserInStorage();
                        this.updateUserInfo();
                        this.updateMiningMachines();
                        this.updateActiveMiningMachines();
                        
                        this.showNotification(`Lucro final de ${machine.return} MT coletado da máquina ${machine.name}!`, 'success');
                    }
                );
            }
            
            // Iniciar verificação de mineração
            startMiningCheck() {
                // Verificar a cada minuto se alguma máquina terminou
                this.miningInterval = setInterval(() => {
                    if (this.currentUser && this.currentUser.miningMachines && this.currentUser.miningMachines.length > 0) {
                        this.updateActiveMiningMachines();
                    }
                }, 60000); // 1 minuto
            }
            
            // Controlar o timer
            toggleTimer() {
                const startTimerBtn = document.getElementById('start-timer');
                const timerDisplay = document.getElementById('timer');
                const timerProgress = document.getElementById('timer-progress');
                
                if (this.timerRunning) {
                    // Parar o timer
                    clearInterval(this.timerInterval);
                    this.timerRunning = false;
                    startTimerBtn.innerHTML = '<i class="fas fa-play"></i> Continuar Visualização';
                } else {
                    // Iniciar o timer
                    this.timerRunning = true;
                    startTimerBtn.innerHTML = '<i class="fas fa-pause"></i> Parar Visualização';
                    
                    this.timerInterval = setInterval(() => {
                        this.timeLeft--;
                        
                        // Atualizar display
                        const minutes = Math.floor(this.timeLeft / 60);
                        const seconds = this.timeLeft % 60;
                        timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                        
                        // Atualizar progresso visual
                        const progress = ((300 - this.timeLeft) / 300) * 100;
                        timerProgress.style.background = `conic-gradient(var(--secondary) ${progress}%, var(--gray-light) 0%)`;
                        
                        // Timer terminado
                        if (this.timeLeft <= 0) {
                            clearInterval(this.timerInterval);
                            this.timerRunning = false;
                            
                            // Adicionar recompensa ao saldo de bónus
                            const reward = 0.10; // 0.10 MT por 5 minutos
                            this.currentUser.wallet.bonus += reward;
                            this.currentUser.transactions.push({
                                type: 'timer',
                                amount: reward,
                                description: 'Recompensa de visualização (5 minutos)',
                                date: new Date().toISOString(),
                                wallet: 'bonus'
                            });
                            
                            // Atualizar localStorage
                            this.updateUserInStorage();
                            this.updateUserInfo();
                            
                            // Marcar como usado hoje
                            const today = new Date().toDateString();
                            localStorage.setItem(`timerUsed_${this.currentUser.phone}`, today);
                            
                            startTimerBtn.disabled = true;
                            startTimerBtn.textContent = 'Tarefa Diária Concluído';
                            
                            this.showNotification('Parabéns! Ganhou 0.10 MT por completar 5 minutos de visualização.', 'success');
                        }
                    }, 1000);
                }
            }
            
            // CORREÇÃO: Confirmar depósito com valor mínimo corrigido
            confirmDeposit() {
                const amount = parseInt(document.getElementById('deposit-amount').value);
                const txnId = document.getElementById('transaction-id').value;
                const phone = document.getElementById('deposit-phone').value;
                const depositAlert = document.getElementById('deposit-alert');
                
                // CORREÇÃO: Valor mínimo corrigido para 300
                if (!amount || amount < 66584585) {
                    this.showAlert(depositAlert, 'O valor mínimo para depósito é 300 MT.', 'error');
                    return;
                }
                
                if (!txnId) {
                    this.showAlert(depositAlert, 'Por favor, insira o ID da transação Paga Fácil.', 'error');
                    return;
                }
                
                if (!phone) {
                    this.showAlert(depositAlert, 'Por favor, insira o seu número Paga Fácil.', 'error');
                    return;
                }
                
                // Mostrar confirmação
                this.showConfirmation(
                    'Confirmar Depósito',
                    `Tem certeza que deseja confirmar o depósito de ${amount} MT?`,
                    () => {
                        // Simular processamento de depósito (vai para saldo principal)
                        this.currentUser.wallet.main += amount;
                        this.currentUser.totalDeposited += amount;
                        this.currentUser.transactions.push({
                            type: 'deposit',
                            amount: amount,
                            description: `Depósito via Paga Fácil (ID: ${txnId})`,
                            date: new Date().toISOString(),
                            wallet: 'main'
                        });
                        
                        // Atualizar localStorage
                        this.updateUserInStorage();
                        this.updateUserInfo();
                        this.updateMiningMachines();
                        
                        this.showNotification(`Depósito de ${amount} MT confirmado com sucesso! Saldo creditado.`, 'success');
                        
                        // Limpar formulário
                        document.getElementById('deposit-amount').value = '';
                        document.getElementById('transaction-id').value = '';
                        document.getElementById('deposit-phone').value = '';
                    }
                );
            }
            
            // Vincular conta M-Pesa
            linkMpesaAccount() {
                const phone = document.getElementById('mpesa-phone').value;
                const name = document.getElementById('mpesa-name').value;
                const pin = document.getElementById('mpesa-pin').value;
                const withdrawAlert = document.getElementById('withdraw-alert');
                
                if (!phone) {
                    this.showAlert(withdrawAlert, 'Por favor, insira o seu número M-Pesa.', 'error');
                    return;
                }
                
                if (!name) {
                    this.showAlert(withdrawAlert, 'Por favor, insira o seu nome completo.', 'error');
                    return;
                }
                
                if (!pin || pin.length !== 4) {
                    this.showAlert(withdrawAlert, 'Por favor, insira um PIN válido de 4 dígitos.', 'error');
                    return;
                }
                
                // Simular verificação de conta M-Pesa
                this.showConfirmation(
                    'Vincular Carteira Móvel',
                    `Tem certeza que deseja vincular está Conta ${phone}?`,
                    () => {
                        // Simular processo de verificação
                        const linkBtn = document.getElementById('link-account');
                        const originalText = linkBtn.innerHTML;
                        linkBtn.innerHTML = '<div class="loading"></div> Verificando...';
                        linkBtn.disabled = true;
                        
                        setTimeout(() => {
                            // Vincular conta M-Pesa
                            this.currentUser.mpesaAccount = {
                                phone: phone,
                                name: name,
                                linkedAt: new Date().toISOString()
                            };
                            
                            // Atualizar localStorage
                            this.updateUserInStorage();
                            
                            // Atualizar interface
                            this.updateWithdrawSection();
                            
                            // Limpar formulário
                            document.getElementById('mpesa-phone').value = '';
                            document.getElementById('mpesa-name').value = '';
                            document.getElementById('mpesa-pin').value = '';
                            
                            // Restaurar botão
                            linkBtn.innerHTML = originalText;
                            linkBtn.disabled = false;
                            
                            this.showNotification('Carteira Móvel vinculada com sucesso! Agora pode fazer levantamentos.', 'success');
                        }, 2000);
                    }
                );
            }
            
            // Desvincular conta M-Pesa
            unlinkMpesaAccount() {
                this.showConfirmation(
                    'Desvincular Carteira Móvel',
                    'Tem certeza que deseja desvincular a sua carteira móvel?',
                    () => {
                        this.currentUser.mpesaAccount = null;
                        this.updateUserInStorage();
                        this.updateWithdrawSection();
                        this.showNotification('Carteira Móvel desvinculada com sucesso!', 'info');
                    }
                );
            }
            
            // Atualizar seção de levantamentos
            updateWithdrawSection() {
                const linkedAccount = document.getElementById('linked-account');
                const linkAccountSection = document.getElementById('link-account-section');
                const withdrawSection = document.getElementById('withdraw-section');
                
                if (this.currentUser.mpesaAccount) {
                    // Conta vinculada
                    linkedAccount.style.display = 'block';
                    linkAccountSection.style.display = 'none';
                    withdrawSection.style.display = 'block';
                    
                    // Atualizar informações da conta
                    document.getElementById('account-name').textContent = this.currentUser.mpesaAccount.name;
                    document.getElementById('account-number').textContent = this.currentUser.mpesaAccount.phone;
                } else {
                    // Conta não vinculada
                    linkedAccount.style.display = 'none';
                    linkAccountSection.style.display = 'block';
                    withdrawSection.style.display = 'none';
                }
            }
            
            // Solicitar levantamento via M-Pesa ou E-Mola 
            requestWithdraw() {
                const amount = parseInt(document.getElementById('withdraw-amount').value);
                const pin = document.getElementById('withdraw-pin').value;
                const withdrawAlert = document.getElementById('withdraw-alert');
                
                if (!amount || amount < 100) {
                    this.showAlert(withdrawAlert, 'O valor mínimo para levantamento é 100 MT.', 'error');
                    return;
                }
                
                if (!pin || pin.length !== 4) {
                    this.showAlert(withdrawAlert, 'Por favor, insira um PIN válido de 4 dígitos.', 'error');
                    return;
                }
                
                // Verificar saldo principal (apenas saldo principal pode ser levantado)
                if (amount > this.currentUser.wallet.main) {
                    this.showAlert(withdrawAlert, 'Saldo principal insuficiente para este levantamento.', 'error');
                    return;
                }
                
                // Mostrar confirmação
                this.showConfirmation(
                    'Confirmar Levantamento',
                    `Tem certeza que deseja solicitar um levantamento de ${amount} MT para sua carteira móvel${this.currentUser.mpesaAccount.phone}? Taxa de processamento: 5 MT.`,
                    () => {
                        // Processar levantamento
                        const tax = 5; // Taxa de 5 MT
                        const totalDeduction = amount + tax;
                        
                        this.currentUser.wallet.main -= totalDeduction;
                        this.currentUser.transactions.push({
                            type: 'withdraw',
                            amount: amount,
                            description: `Levantamento via M-Pesa para ${this.currentUser.mpesaAccount.phone} (taxa: ${tax} MT)`,
                            date: new Date().toISOString(),
                            wallet: 'main'
                        });
                        
                        // Atualizar localStorage
                        this.updateUserInStorage();
                        this.updateUserInfo();
                        this.updateMiningMachines();
                        
                        // Limpar formulário
                        document.getElementById('withdraw-amount').value = '';
                        document.getElementById('withdraw-pin').value = '';
                        
                        this.showNotification(`Levantamento de ${amount} MT solicitado com sucesso! Será processado em até 24 horas.`, 'success');
                    }
                );
            }
            
            // Terminar sessão
            logout() {
                this.showConfirmation(
                    'Terminar Sessão',
                    'Tem certeza que deseja terminar a sessão?',
                    () => {
                        this.currentUser = null;
                        localStorage.removeItem('currentUser');
                        document.getElementById('dashboard').style.display = 'none';
                        document.getElementById('auth-screen').style.display = 'block';
                        
                        // Limpar formulários
                        document.getElementById('phone').value = '';
                        document.getElementById('password').value = '';
                        document.getElementById('referral-code').value = '';
                        
                        // Parar o timer se estiver a correr
                        if (this.timerRunning) {
                            clearInterval(this.timerInterval);
                            this.timerRunning = false;
                        }
                        
                        this.showNotification('Sessão terminada com sucesso!', 'info');
                    }
                );
            }
            
            // Atualizar usuário no localStorage
            updateUserInStorage() {
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const userIndex = users.findIndex(u => u.phone === this.currentUser.phone);
                if (userIndex !== -1) {
                    users[userIndex] = this.currentUser;
                    localStorage.setItem('users', JSON.stringify(users));
                    localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
                }
            }
            
            // Gerar código de referência
            generateReferralCode() {
                return Math.random().toString(36).substring(2, 8).toUpperCase();
            }
            
            // Mostrar alertas
            showAlert(alertElement, message, type) {
                alertElement.textContent = message;
                alertElement.className = 'alert';
                alertElement.classList.add('alert-' + type);
                alertElement.style.display = 'block';
                
                setTimeout(() => {
                    alertElement.style.display = 'none';
                }, 5000);
            }
            
            // Mostrar notificação
            showNotification(message, type) {
                const notification = document.getElementById('notification');
                const notificationText = document.getElementById('notification-text');
                const icon = notification.querySelector('i');
                
                notificationText.textContent = message;
                notification.className = 'notification ' + type;
                notification.classList.add('show');
                
                // Definir ícone baseado no tipo
                icon.className = type === 'success' ? 'fas fa-check-circle' : 
                                type === 'error' ? 'fas fa-exclamation-circle' : 
                                'fas fa-info-circle';
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 5000);
            }
            
            // Mostrar modal de confirmação
            showConfirmation(title, message, confirmCallback) {
                const modal = document.getElementById('confirmation-modal');
                const titleElement = document.getElementById('confirmation-title');
                const messageElement = document.getElementById('confirmation-message');
                const confirmButton = document.getElementById('confirmation-confirm');
                
                titleElement.textContent = title;
                messageElement.textContent = message;
                
                // Remover event listeners anteriores
                const newConfirmButton = confirmButton.cloneNode(true);
                confirmButton.parentNode.replaceChild(newConfirmButton, confirmButton);
                
                // Adicionar novo event listener
                newConfirmButton.addEventListener('click', () => {
                    confirmCallback();
                    this.hideConfirmation();
                });
                
                modal.classList.add('show');
            }
            
            // Esconder modal de confirmação
            hideConfirmation() {
                const modal = document.getElementById('confirmation-modal');
                modal.classList.remove('show');
            }
            
            // Copiar para a área de transferência
            copyToClipboard(text) {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
            }
            
            // Alternar tema escuro/claro
            toggleTheme() {
                const body = document.body;
                const themeToggle = document.getElementById('theme-toggle');
                const icon = themeToggle.querySelector('i');
                
                body.classList.toggle('dark-mode');
                
                if (body.classList.contains('dark-mode')) {
                    icon.className = 'fas fa-sun';
                    localStorage.setItem('theme', 'dark');
                } else {
                    icon.className = 'fas fa-moon';
                    localStorage.setItem('theme', 'light');
                }
            }
        }

        // Inicializar a aplicação quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', () => {
            window.amazonMoneyApp = new AmazonMoneyApp();
            
            // Verificar tema salvo
            const savedTheme = localStorage.getItem('theme');
            const body = document.body;
            const themeToggle = document.getElementById('theme-toggle');
            const icon = themeToggle.querySelector('i');
            
            if (savedTheme === 'dark') {
                body.classList.add('dark-mode');
                icon.className = 'fas fa-sun';
            }
        });
    </script>
</body>
</html>